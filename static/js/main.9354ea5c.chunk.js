(this.webpackJsonpradardish=this.webpackJsonpradardish||[]).push([[0],{24:function(e,t,a){},44:function(e,t,a){e.exports=a(87)},49:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(41),o=a.n(l),s=(a(49),a(19)),i=a.n(s),c=a(20),u=a(26),h=a(9),m=a(10),d=a(14),g=a(13),b=a(12),v=a(22),f=a.n(v);f.a.initializeApp({apiKey:"AIzaSyCLPdPZE3AXJWI4IyaxNUH1Vns_btyRmGY",authDomain:"radardish-1e181.firebaseapp.com",databaseURL:"https://radardish-1e181.firebaseio.com",projectId:"radardish-1e181",storageBucket:"radardish-1e181.appspot.com",messagingSenderId:"1055621417968",appId:"1:1055621417968:web:bf2eb90bf497641b0bab35"});var p=new f.a.auth.GithubAuthProvider,E=f.a.auth(),y=f.a,k=a(66).default,O=function(){function e(){Object(h.a)(this,e)}return Object(m.a)(e,[{key:"getFollowers",value:function(e){return k.get("https://api.github.com/user/followers",{headers:{Authorization:"token "+e}})}},{key:"getFollowing",value:function(e){return k.get("https://api.github.com/user/following",{headers:{Authorization:"token "+e}})}}]),e}(),w=(a(24),a(15)),j=a(2),S=new O,C=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).state={currentItem:"",username:"",items:[],user:null,accessToken:null,entries:[]},e.login=e.login.bind(Object(d.a)(e)),e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;E.onAuthStateChanged((function(t){t&&(console.log(t),e.setState({user:t}))}))}},{key:"login",value:function(){var e=this;E.signInWithPopup(p).then(function(){var t=Object(u.a)(i.a.mark((function t(a){var n,r,l,o,s,u,h,m,d,g,b;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.user,r=a.credential.accessToken,console.log("logged in as",a),e.setState({user:n,accessToken:r}),t.next=6,S.getFollowers(r);case 6:return l=t.sent,t.next=9,S.getFollowing(r);case 9:o=t.sent,console.log(l),(s=y.database().ref("users/"+n.uid)).set({accessToken:r,githubUsername:a.additionalUserInfo.username}),u=Object(c.a)(l.data);try{for(u.s();!(h=u.n()).done;)m=h.value,s.child("followers/"+m.login).set(m)}catch(i){u.e(i)}finally{u.f()}d=Object(c.a)(o.data);try{for(d.s();!(g=d.n()).done;)b=g.value,s.child("following/"+b.login).set(b)}catch(i){d.e(i)}finally{d.f()}case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"render",value:function(){return r.a.createElement("main",{role:"main",className:"container"},r.a.createElement("div",{class:"jumbotron"},r.a.createElement("div",{class:"container"},r.a.createElement("h1",{class:"display-3"},"Curate your own Tech-Radar and share it with the world"),r.a.createElement("p",null,"Login with your Github account and create your own Tech Radar. The changed are directly shared with your followers on Github."),this.state.user?r.a.createElement("p",null,r.a.createElement(w.b,{className:"btn btn-light",to:"/my"},"My Rader")):r.a.createElement("p",null,r.a.createElement("button",{class:"btn btn-light",onClick:this.login},"Login using GitHub")))))}}]),a}(n.Component),N=Object(j.e)(C),T=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){window.radar_visualization({svg_id:"radar",width:1450,height:1e3,colors:{background:"#fff",grid:"#bbb",inactive:"#ddd"},title:"My Radar",quadrants:[{name:"Languages"},{name:"Infrastructure"},{name:"Frameworks"},{name:"Data Management"}],rings:[{name:"ADOPT",color:"#93c47d"},{name:"TRIAL",color:"#b7e1cd"},{name:"ASSESS",color:"#fce8b2"},{name:"HOLD",color:"#f4c7c3"}],print_layout:!0,entries:this.props.entries});return r.a.createElement("svg",{id:"radar",style:{}})}}]),a}(n.Component),I=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).state={uid:null,entries:[]},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.uid;this.setState({uid:t}),y.database().ref("radars/"+t).on("value",(function(t){var a=t.val(),n=[];for(var r in a)n.push({label:r,quadrant:a[r].quadrant,ring:a[r].ring,moved:a[r].moved,active:a[r].active,link:a[r].link});e.setState({entries:n})}))}},{key:"render",value:function(){return r.a.createElement("main",{role:"main",className:"container-fluid"},r.a.createElement("h1",null," ",this.state.uid," "),r.a.createElement(T,{entries:this.state.entries}))}}]),a}(n.Component),U=Object(j.e)(I),R=a(43),D=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={entries:[],currentTechnology:"",currentChange:0,currentQuadrant:0,currentRing:0},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(d.a)(n)),n}return Object(m.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(R.a)({},e.target.id,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=y.database().ref("radars/"+this.props.githubUsername),a={moved:Number(this.state.currentChange),quadrant:Number(this.state.currentQuadrant),ring:Number(this.state.currentRing)};t.child(this.state.currentTechnology).set(a),this.setState({currentTechnology:"",currentChange:0,currentQuadrant:0,currentRing:0})}},{key:"componentDidMount",value:function(){var e=this;this.setState({entries:[],currentTechnology:"",currentChange:0,currentQuadrant:0,currentRing:0}),y.database().ref("radars/"+this.props.githubUsername).on("value",(function(t){var a=t.val(),n=[];for(var r in a)n.push({label:r,quadrant:a[r].quadrant,ring:a[r].ring,moved:a[r].moved,active:a[r].active,link:a[r].link});e.setState({entries:n})}))}},{key:"render",value:function(){return r.a.createElement("main",{role:"main",className:"container-fluid"},r.a.createElement("h1",null," ",this.state.uid," "),r.a.createElement(T,{entries:this.state.entries}),r.a.createElement("form",{className:"form-inline",onSubmit:this.handleSubmit},r.a.createElement("label",{className:"sr-only"},"Technology"),r.a.createElement("input",{type:"text",className:"form-control mb-2 mr-sm-2",id:"currentTechnology",placeholder:"Kotlin",onChange:this.handleChange,value:this.state.currentTechnology}),r.a.createElement("label",{className:"sr-only"},"Change"),r.a.createElement("select",{className:"form-control",id:"currentChange",onChange:this.handleChange,value:this.state.currentChange},r.a.createElement("option",{value:"0"},"Unchanged"),r.a.createElement("option",{value:"1"},"Up"),r.a.createElement("option",{value:"-1"},"Down")),r.a.createElement("label",{className:"sr-only"},"Quadrant"),r.a.createElement("select",{className:"form-control",id:"currentQuadrant",onChange:this.handleChange,value:this.state.currentQuadrant},r.a.createElement("option",{value:"0"},"Languages"),r.a.createElement("option",{value:"1"},"Infrastructure"),r.a.createElement("option",{value:"2"},"Frameworks"),r.a.createElement("option",{value:"3"},"Data Management")),r.a.createElement("label",{className:"sr-only"},"Ring"),r.a.createElement("select",{className:"form-control",id:"currentRing",onChange:this.handleChange,value:this.state.currentRing},r.a.createElement("option",{value:"3"},"HOLD"),r.a.createElement("option",{value:"2"},"ASSESS"),r.a.createElement("option",{value:"1"},"TRIAL"),r.a.createElement("option",{value:"0"},"ADOPT")),r.a.createElement("button",{type:"submit",className:"btn btn-primary mb-2"},"Save")))}}]),a}(n.Component),x=Object(j.e)(D),A=new O,L=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).state={user:null,accessToken:null,githubUsername:null},e.login=e.login.bind(Object(d.a)(e)),e.logout=e.logout.bind(Object(d.a)(e)),e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("path");t&&(localStorage.removeItem("path"),this.props.history.push(t)),E.onAuthStateChanged((function(t){t&&(console.log(t),e.setState({user:t}),y.database().ref("users/"+t.uid).once("value",(function(t){var a=t.val(),n=a.accessToken,r=a.githubUsername;console.log("Restored user",n,r),e.setState({accessToken:n,githubUsername:r})})))}))}},{key:"logout",value:function(){var e=this;E.signOut().then((function(){e.setState({user:null,accessToken:null,githubUsername:null})}))}},{key:"login",value:function(){var e=this;E.signInWithPopup(p).then(function(){var t=Object(u.a)(i.a.mark((function t(a){var n,r,l,o,s,u,h,m,d,g,b,v;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.user,r=a.credential.accessToken,l=a.additionalUserInfo.username,console.log("logged in as",a),e.setState({user:n,githubUsername:l,accessToken:r}),t.next=7,A.getFollowers(r);case 7:return o=t.sent,t.next=10,A.getFollowing(r);case 10:s=t.sent,console.log(o),(u=y.database().ref("users/"+n.uid)).set({accessToken:r,githubUsername:a.additionalUserInfo.username}),h=Object(c.a)(o.data);try{for(h.s();!(m=h.n()).done;)d=m.value,u.child("followers/"+d.login).set(d)}catch(i){h.e(i)}finally{h.f()}g=Object(c.a)(s.data);try{for(g.s();!(b=g.n()).done;)v=b.value,u.child("following/"+v.login).set(v)}catch(i){g.e(i)}finally{g.f()}case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark fixed-top"},r.a.createElement(w.b,{className:"navbar-brand",to:"/"},"Radardish"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarsExampleDefault","aria-controls":"navbarsExampleDefault","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("ul",{className:"navbar-nav mr-auto"},this.state.user?r.a.createElement("li",{className:"nav-item"},r.a.createElement(w.b,{className:"nav-link",to:"/my"},"My Radar")):r.a.createElement("li",null)),r.a.createElement("div",{className:"form-inline my-2 my-lg-0"},this.state.user?r.a.createElement("button",{className:"btn btn-dark",onClick:this.logout},"Log Out"):r.a.createElement("button",{className:"btn btn-light",onClick:this.login},r.a.createElement("i",{className:"fa fa-github","aria-hidden":"true"})," Login"))),r.a.createElement(j.a,{exact:!0,path:"/"},r.a.createElement(N,null)),r.a.createElement(j.a,{path:"/my"},this.state.githubUsername?r.a.createElement(x,{githubUsername:this.state.githubUsername}):r.a.createElement("h1",null,"Loading Data")),r.a.createElement(j.a,{path:"/u/:uid",children:r.a.createElement(U,null)}))}}]),a}(n.Component),M=Object(j.e)(L);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w.a,null,r.a.createElement(M,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.9354ea5c.chunk.js.map